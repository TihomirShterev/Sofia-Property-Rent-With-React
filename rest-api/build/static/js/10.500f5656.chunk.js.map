{"version":3,"sources":["pages/profile/index.module.css","pages/profile/index.js"],"names":["module","exports","ProfilePage","props","getProfile","id","a","fetch","res","ok","history","push","json","user","setState","email","myItems","state","this","match","params","userId","context","loggedIn","className","styles","profile","flex","to","Component","contextType","UserContext"],"mappings":"iGACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,KAAO,sBAAsB,aAAa,4BAA4B,eAAe,gC,wJCKpIC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAeRC,WAhBmB,uCAgBN,WAAOC,GAAP,iBAAAC,EAAA,sEACOC,MAAM,0DAAD,OAA2DF,IADvE,cACLG,EADK,QAIFC,IACP,EAAKN,MAAMO,QAAQC,KAAK,UALf,SAQQH,EAAII,OARZ,OAQLC,EARK,OAWX,EAAKC,SAAS,CACZC,MAAOF,EAAKE,MACZC,QAASH,EAAKG,UAbL,2CAhBM,sDAGjB,EAAKC,MAAQ,CACXF,MAAO,KACPC,QAAS,MALM,E,qDAWnB,WAEEE,KAAKd,WAAWc,KAAKf,MAAMgB,MAAMC,OAAOC,U,oBAoB1C,WAAU,IAAD,EAIHH,KAAKD,MAFPF,EAFK,EAELA,MACAC,EAHK,EAGLA,QAGF,OAA8B,OAA1BE,KAAKI,QAAQC,SAEb,cAAC,IAAD,UACE,gDAMJ,eAAC,IAAD,WACE,sBAAKC,UAAWC,IAAOC,QAAvB,UAEE,2CACA,sBAAKF,UAAWC,IAAOE,KAAvB,UACE,wCACA,+BAAOZ,OAET,sBAAKS,UAAWC,IAAOE,KAAvB,UACE,2CACA,+BAAOX,UAITE,KAAKI,QAAQC,SAAW,KAAO,cAAC,IAAD,CAAUK,GAAG,uB,GA/D5BC,aAApB3B,EAUG4B,YAAcC,IA2DR7B","file":"static/js/10.500f5656.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile__3e28l\",\"flex\":\"profile_flex__3CSu0\",\"red-button\":\"profile_red-button__2UjbS\",\"green-button\":\"profile_green-button__17pNU\"};","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport UserContext from '../../Context';\r\nimport Layout from '../../components/layout';\r\nimport styles from './index.module.css';\r\n\r\nclass ProfilePage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      email: null,\r\n      myItems: null\r\n    };\r\n  }\r\n\r\n  static contextType = UserContext;\r\n\r\n  componentDidMount() {\r\n    // console.log(this.props.match.params.userId);\r\n    this.getProfile(this.props.match.params.userId);\r\n  }\r\n\r\n  getProfile = async (id) => {\r\n    const res = await fetch(`https://estatesbg.herokuapp.com/api/users/profile?_id=${id}`);\r\n    // console.log(res);\r\n\r\n    if (!res.ok) {\r\n      this.props.history.push('/error');\r\n    }\r\n\r\n    const user = await res.json();\r\n    // console.log(user);\r\n\r\n    this.setState({\r\n      email: user.email,\r\n      myItems: user.myItems\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      email,\r\n      myItems\r\n    } = this.state;\r\n\r\n    if (this.context.loggedIn === null) {\r\n      return (\r\n        <Layout>\r\n          <div>Loading....</div>\r\n        </Layout>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Layout>\r\n        <div className={styles.profile}>\r\n          {/* <img src=\"/assets/profile.png\" alt=\"default user\" /> */}\r\n          <h3>User Info</h3>\r\n          <div className={styles.flex}>\r\n            <p>Email: </p>\r\n            <span>{email}</span>\r\n          </div>\r\n          <div className={styles.flex}>\r\n            <p>My Offers:</p>\r\n            <span>{myItems}</span>\r\n          </div>\r\n        </div>\r\n        {/* auth \"guard\" */}\r\n        { this.context.loggedIn ? null : <Redirect to=\"/user/login\" />}\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProfilePage;"],"sourceRoot":""}